# -*- coding: utf-8 -*-
"""finding if improvement or not.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/17ft-2SCKF-7RDmqvtgb5iz8G2fOcc_nL
"""

import pandas  as pd
import matplotlib.pyplot as plt
import numpy as np
from sklearn.linear_model import LogisticRegression
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import confusion_matrix, classification_report
from sklearn.neighbors import KNeighborsClassifier
import seaborn as sns
import torch


data = pd.read_csv("/content/improvement.csv")
data.head()

print(data.info())

data=data.replace('M',0)
data=data.replace('m',0)
data=data.replace('F',1)
data=data.replace('Healthy',1)
data=data.replace('Patients',0)
data=data.replace('No',0)
data=data.replace('YES',1)
data=data.replace('Left',0)
data=data.replace('Right',1)

data.reset_index(inplace = True)

# rows = data.iterrows()
# for index in data.index:
#   if(data.at[row[0], 'PHQ_2'] + data.at[row[0], 'GAD_2'] + data.at[row[0], 'WB_2'] + data.at[row[0], 'HDRS_2']==0):
# #     data=data.drop(data.index[[row[0]]])
# for index in data.index:
#     if(data.at[index, 'PHQ_2'] + data.at[index, 'GAD_2'] + data.at[index, 'WB_2'] + data.at[index, 'HDRS_2']==0):
# #         data=data.drop(data.index[[index]])
# for index in range(len(data)-1, -1, -1):
#     if(data.at[index, 'PHQ_2'] + data.at[index, 'GAD_2'] + data.at[index, 'WB_2'] + data.at[index, 'HDRS_2']==0):
#         data=data.drop(data.index[[index]])
condition = (data.PHQ_2 + data.GAD_2 + data.WB_2 + data.HDRS_2) != 0
data_clean = data[condition]
data=data_clean
data=pd.DataFrame(data)

# normalise the amount column
# data['normAmount'] = StandardScaler().fit_transform(np.array(data['Amount']).reshape(-1, 1))

# drop Time and Amount columns as they are not relevant for prediction purpose
# data = data.drop(['Date-Visit1','Time','Date-Visit2'], axis = 1)

# as you can see there are 492 fraud transactions.
data['Patients'].value_counts()

data

data.dropna(subset=['PHQ_2', 'GAD_2', 'WB_2', 'HDRS_2'], inplace=True)

data

#  !pip install lifelines

from lifelines import CoxPHFitter

# Create a column to indicate if the patient has recovered
data['recovered'] = (data['PHQ_2'] / data['PHQ'] <= 0.8) & (data['GAD_2'] / data['GAD'] <= 0.8) & (data['WB_2'] / data['WB'] >= 1.2) & (data['HDRS_2'] / data['HDRS'] <= 0.8)

data

type(data)

for index, row in data.iterrows():
    if row["recovered"]:
        print(row["ID"])

"""Medication received by above patients

![image.png](data:image/png;base64,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)

![image.png](data:image/png;base64,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
)

![image.png](data:image/png;base64,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)

![image.png](data:image/png;base64,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)

None

![image.png](data:image/png;base64,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)

![image.png](data:image/png;base64,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)

If recovered check for medicines
"""

# from lifelines.utilis import survival_table_from_events
# table=survival_table_from_events(data['Time_days'],data['recovered'])
T = data['Time_days']
E = data['recovered']
from lifelines import KaplanMeierFitter
kmf = KaplanMeierFitter()
kmf.fit(T, event_observed=E)
kmf.survival_function_

kmf.plot_survival_function()

"""**This analysis makes sense only if everyone is given same medication or have some common factor whose results are to be judged, which isn't the case here.**"""

# cph=CoxPHFitter()
data = data.drop(columns=['Patients','Gender','History','Handedness'],axis=0)
# data=CoxPHFitter(penalizer=0.1).fit(data, duration_col='Time_days', event_col='recovered',show_progress=True)

cph=CoxPHFitter(penalizer=0.1)
cph.fit(data, duration_col='Time_days', event_col='recovered',show_progress=True)
cph.print_summary()

"""p-value == 0.06

Let us check if the situation worsened for some patients
"""

data



data

for index, row in data.iterrows():
  if row["worsened"]:
    print(row["ID"])

for index, row in data.iterrows():
  if row["worsened"]:
     print(row["ID"])